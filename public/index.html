<!DOCTYPE html>
<html lang="en">
  <head>
  <!-- 1) Load the Firebase SDKs first -->
  <script src="https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/12.0.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/12.0.0/firebase-database.js"></script>
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>The FanMoon</title>
  <style>
    /* ─────────── Page & Button Reset ─────────── */
    * { box-sizing: border-box; margin:0; padding:0; }
    html { font-size:16px; }
    body {
      background: #181828;
      color: #fff;
      font-family: 'Segoe UI', sans-serif;
      text-align: center;
      padding: 24px 0;
    }

    /* ─────────── Fanmoon Container ─────────── */
    #fanmoon {
      width: 200px;
      height: 200px;
      margin: 0 auto 24px;
      border-radius: 50%;
      position: relative;
      background: #000;
      overflow: hidden;
      /* golden halo */
      box-shadow:
        inset 0 10px 30px rgba(0,0,0,0.7),
        0 0 60px rgba(255,215,0,0.4);
    }
    /* pastel purple/pink/blue blobs + noise */
    #fanmoon.huntrix-win {
      background:
        repeating-linear-gradient(45deg,
          rgba(255,255,255,0.05) 0px,
          rgba(255,255,255,0.05) 1px,
          transparent 2px,
          transparent 3px
        ) 0 0/3px 3px,
        radial-gradient(circle at 30% 30%, rgba(180,120,255,0.6), transparent 60%),
        radial-gradient(circle at 70% 40%, rgba(255,120,200,0.6), transparent 60%),
        radial-gradient(circle at 50% 70%, rgba(120,200,255,0.6), transparent 60%);
      background-blend-mode: screen;
      filter: blur(8px) contrast(1.1) saturate(0.9);
    }

    /* ─────────── Glossy Highlight ─────────── */
    #fanmoon.huntrix-win::before {
      content: "";
      position: absolute; inset: 0;
      pointer-events: none;
      background: radial-gradient(circle at 30% 30%,
        rgba(255,255,255,0.3),
        transparent 60%
      );
      mix-blend-mode: screen;
      opacity: 0.4;
      z-index: 1;
    }

    /* ─────────── Blue Ripple Lines ─────────── */
    #fanmoon.huntrix-win::after {
      content: "";
      position: absolute; inset: 0;
      pointer-events: none;
      background: url("data:image/svg+xml;utf8,\
<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 200'>\
  <path d='M0,80 C40,60 80,100 120,90 S180,80 200,75' stroke='%2300d4ff' stroke-width='3' fill='none' opacity='0.4'/>\
  <path d='M0,110 C50,90 100,140 150,110 S200,95 200,95' stroke='%2300d4ff' stroke-width='2' fill='none' opacity='0.3'/>\
  <path d='M0,135 C40,115 120,150 180,130 S200,120 200,120' stroke='%2300d4ff' stroke-width='1' fill='none' opacity='0.2'/>\
</svg>") center/contain no-repeat;
      mix-blend-mode: screen;
      filter: blur(3px);
      z-index: 2;
    }

    /* ─────────── SVG Noise Filter ─────────── */
    svg#noise-defs { position:absolute; width:0; height:0; }
    svg#noise-defs filter feTurbulence { baseFrequency:3; numOctaves:2; }
    svg#noise-defs filter feColorMatrix { values: 1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 0.3 0; }

    /* ─────────── Voting UI & Counts ─────────── */
    .vote-ui {
      display: flex; justify-content: center;
      gap: 1.5rem; margin-bottom: 0.5rem;
    }
    .vote-btn {
      font-size: 1rem; padding: 0.75rem 1.5rem;
      border: none; border-radius: 2rem;
      font-weight:700; cursor:pointer;
      transition: transform .1s, box-shadow .1s;
      box-shadow:0 2px 12px #0004; outline:none;
    }
    .vote-btn:active { transform:scale(0.95); }
    .vote-btn.saja {
      background:linear-gradient(90deg,#ff46c7,#e00047);
      color:#fff; text-shadow:0 1px 3px #e0004780;
    }
    .vote-btn.huntrix {
      background:linear-gradient(90deg,#b6fff7,#e2c4ff,#ffe5ec);
      color:#4b3585; text-shadow:0 1px 3px #fff8;
    }

    .vote-counts {
      font-size:1rem; font-weight:600;
      display:flex; justify-content:center; gap:2rem;
      margin-bottom:1.5rem;
    }
    .vote-counts .saja { color:#ff46c7; }
    .vote-counts .huntrix { color:#3dd8ff; }
  </style>

  <!-- SVG filter for noise -->
  <svg id="noise-defs">
    <filter id="pastelNoise">
      <feTurbulence type="fractalNoise" stitchTiles="stitch"/>
      <feColorMatrix type="matrix"/>
      <feComposite in2="SourceGraphic" operator="over"/>
    </filter>
  </svg>
</head>

<body>
  <h1>The FanMoon</h1>

  <!-- THE ORB -->
  <div id="fanmoon" class="fantrix-win"></div>

  <!-- BUTTONS -->
  <div class="vote-ui">
    <button id="vote-saja"    class="vote-btn saja">Vote Saja Boys</button>
    <button id="vote-huntrix" class="vote-btn huntrix">Vote Huntr/x</button>
  </div>

  <!-- COUNTERS -->
  <div class="vote-counts">
    <div class="saja">Saja Boys: <span id="saja-count">0</span></div>
    <div class="huntrix">Huntr/x: <span id="huntrix-count">0</span></div>
  </div>

  <!-- ─────────── Firebase + Vote Logic ─────────── -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js";
    import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-auth.js";
    import { getDatabase, ref, onValue, set } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-database.js";

    // Your config
    const firebaseConfig = {
    apiKey: "AIzaSyAAjM5tVDJ5ynaoN-Ju3TgbsfXm0lBEbVI",
    authDomain: "honmoon-kpop.firebaseapp.com",
    databaseURL: "https://honmoon-kpop-default-rtdb.firebaseio.com",
    projectId: "honmoon-kpop",
    storageBucket: "honmoon-kpop.firebasestorage.app",
    messagingSenderId: "1009037444916",
    appId: "1:1009037444916:web:a54fb2bed4dd8ff21f8761",
    measurementId: "G-KDLM6N65DE"
  };

// Initialize
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db   = firebase.database();
    // Elements
    const fan = document.getElementById('fanmoon');
    const btnS = document.getElementById('vote-saja');
    const btnH = document.getElementById('vote-huntrix');
    const elS  = document.getElementById('saja-count');
    const elH  = document.getElementById('huntrix-count');

    let votes = { saja:0, huntrix:0 };

    function updateFanmoon() {
      fan.className = 'fanmoon';
      if (votes.saja > votes.huntrix) fan.classList.add('saja-win');
      else fan.classList.add('huntrix-win');
      elS.textContent = votes.saja;
      elH.textContent = votes.huntrix;
    }

    function castVote(band) {
      set(ref(db, `votes/${auth.currentUser.uid}`), band);
    }

    signInAnonymously(auth).then(()=>{
      const uid = auth.currentUser.uid;
      onValue(ref(db,'counts'),snap=>{
        const c = snap.val()||{};
        votes.saja = c.saja||0;
        votes.huntrix = c.huntrix||0;
        updateFanmoon();
      });
      btnS.onclick = ()=>castVote('saja');
      btnH.onclick = ()=>castVote('huntrix');
    }).catch(console.error);
  </script>
</body>
</html>


